massive refactoring and 2.0 release
